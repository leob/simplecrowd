<% page_title(t("pages.projects.title")) %>

<%= render 'search_projects_form' %>
<%= render 'projects_grid' %>

<% content_for :additional_scripts do %>
    <script type="text/javascript">
        $(document).ready(function($) {
            if ($(".has-clear-icon").val()) {
                $(".clear-icon").show();
            } else {
                $(".clear-icon").hide();
            }

            $(".has-clear-icon").bind("keyup focus", function () {
                var t = $(this);
                t.next('span').toggle(Boolean(t.val()));
            });

            $(".clear-icon").click(function () {
                $(this).prev('input').val('').focus();
                $(this).hide();
                $("#project-search-form").submit();
            });

            $("#project-search-category").bind("change", function () {
                $("#project-search-form").submit();
            });

            $("#project-search-form").bind("submit", function () {
                new Spinner().spin(document.body);
            });
        });
    </script>
<% end %>